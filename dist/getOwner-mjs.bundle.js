"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkdapp"] = self["webpackChunkdapp"] || []).push([["getOwner-mjs"],{

/***/ "./node_modules/@ensdomains/ensjs/dist/esm/functions/getOwner.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@ensdomains/ensjs/dist/esm/functions/getOwner.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ getOwner_default)\n/* harmony export */ });\n/* harmony import */ var _ethersproject_abi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ethersproject/abi */ \"./node_modules/@ethersproject/abi/lib.esm/abi-coder.js\");\n/* harmony import */ var _ethersproject_bytes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @ethersproject/bytes */ \"./node_modules/@ethersproject/bytes/lib.esm/index.js\");\n/* harmony import */ var _utils_labels_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/labels.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/labels.mjs\");\n/* harmony import */ var _utils_normalise_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/normalise.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/normalise.mjs\");\n/* harmony import */ var _utils_validation_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/validation.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/validation.mjs\");\n/* harmony import */ var _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/errors.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/errors.mjs\");\n// src/functions/getOwner.ts\n\n\n\n\n\n\nvar singleContractOwnerRaw = async ({ contracts }, contract, namehash, labels) => {\n  switch (contract) {\n    case \"nameWrapper\": {\n      const nameWrapper = await contracts?.getNameWrapper();\n      return {\n        to: nameWrapper.address,\n        data: nameWrapper.interface.encodeFunctionData(\"ownerOf\", [namehash])\n      };\n    }\n    case \"registry\": {\n      const registry = await contracts?.getRegistry();\n      return {\n        to: registry.address,\n        data: registry.interface.encodeFunctionData(\"owner\", [namehash])\n      };\n    }\n    case \"registrar\": {\n      const registrar = await contracts?.getBaseRegistrar();\n      return {\n        to: registrar.address,\n        data: registrar.interface.encodeFunctionData(\"ownerOf\", [\n          (0,_utils_labels_mjs__WEBPACK_IMPORTED_MODULE_0__.labelhash)(labels[0])\n        ])\n      };\n    }\n  }\n};\nvar raw = async ({ contracts, multicallWrapper }, name, options = {}) => {\n  const { contract } = options;\n  const namehash = (0,_utils_normalise_mjs__WEBPACK_IMPORTED_MODULE_1__.namehash)(name);\n  const labels = name.split(\".\");\n  if (contract || labels.length === 1) {\n    return singleContractOwnerRaw(\n      { contracts },\n      contract || \"registry\",\n      namehash,\n      labels\n    );\n  }\n  const registryData = await singleContractOwnerRaw(\n    { contracts },\n    \"registry\",\n    namehash,\n    labels\n  );\n  const nameWrapperData = await singleContractOwnerRaw(\n    { contracts },\n    \"nameWrapper\",\n    namehash,\n    labels\n  );\n  const registrarData = await singleContractOwnerRaw(\n    { contracts },\n    \"registrar\",\n    namehash,\n    labels\n  );\n  const data = [registryData, nameWrapperData];\n  if ((0,_utils_validation_mjs__WEBPACK_IMPORTED_MODULE_2__.checkIsDotEth)(labels)) {\n    data.push(registrarData);\n  }\n  return multicallWrapper.raw(data);\n};\nvar registrantQuery = `\n  query GetRegistrant($namehash: String!) {\n    domain(id: $namehash) {\n      registration {\n        registrant {\n          id\n        }\n      }\n    }\n  }\n`;\nvar singleContractOwnerDecode = (data) => _ethersproject_abi__WEBPACK_IMPORTED_MODULE_4__.defaultAbiCoder.decode([\"address\"], data)[0];\nvar decode = async ({\n  contracts,\n  multicallWrapper,\n  gqlInstance\n}, data, name, options = {}) => {\n  if (!data)\n    return;\n  const { contract, skipGraph = true } = options;\n  const labels = name.split(\".\");\n  const isEth = labels[labels.length - 1] === \"eth\";\n  const is2LD = labels.length === 2;\n  if (contract || labels.length === 1) {\n    const singleOwner = singleContractOwnerDecode(data);\n    const obj = {\n      ownershipLevel: contract || \"registry\"\n    };\n    if (contract === \"registrar\") {\n      return {\n        ...obj,\n        registrant: singleOwner\n      };\n    }\n    return {\n      ...obj,\n      owner: singleOwner\n    };\n  }\n  const result = await multicallWrapper.decode(data);\n  if (!result)\n    return;\n  const nameWrapper = await contracts?.getNameWrapper();\n  const decodedData = [result[0][1], result[1][1], result[2]?.[1]].map(\n    (ret) => ret && ret !== \"0x\" && _ethersproject_abi__WEBPACK_IMPORTED_MODULE_4__.defaultAbiCoder.decode([\"address\"], ret)\n  );\n  const registryOwner = decodedData[0][0];\n  const nameWrapperOwner = decodedData[1][0];\n  let registrarOwner = decodedData[2]?.[0];\n  let baseReturnObject = {};\n  if (isEth) {\n    let graphErrors;\n    if (is2LD) {\n      if (!registrarOwner && !skipGraph) {\n        const graphRegistrantResult = await gqlInstance.client.request(registrantQuery, {\n          namehash: (0,_utils_normalise_mjs__WEBPACK_IMPORTED_MODULE_1__.namehash)(name)\n        }).catch((e) => {\n          console.error(e);\n          graphErrors = (0,_utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.getClientErrors)(e);\n          return void 0;\n        }).finally(_utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.debugSubgraphLatency);\n        registrarOwner = graphRegistrantResult?.domain?.registration?.registrant?.id;\n        baseReturnObject = {\n          expired: true\n        };\n      } else {\n        baseReturnObject = {\n          expired: !registrarOwner\n        };\n      }\n    }\n    if (baseReturnObject.expired && registryOwner?.toLowerCase() === nameWrapper.address.toLowerCase()) {\n      const owner = {\n        owner: nameWrapperOwner,\n        ownershipLevel: \"nameWrapper\",\n        ...baseReturnObject\n      };\n      if (graphErrors) {\n        throw new _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.ENSJSError({\n          data: owner,\n          errors: graphErrors\n        });\n      }\n      return owner;\n    }\n    if (registrarOwner?.toLowerCase() === nameWrapper.address.toLowerCase()) {\n      const owner = {\n        owner: nameWrapperOwner,\n        ownershipLevel: \"nameWrapper\",\n        ...baseReturnObject\n      };\n      if (graphErrors) {\n        throw new _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.ENSJSError({\n          data: owner,\n          errors: graphErrors\n        });\n      }\n      return owner;\n    }\n    if (registrarOwner) {\n      const owner = {\n        registrant: registrarOwner,\n        owner: registryOwner,\n        ownershipLevel: \"registrar\",\n        ...baseReturnObject\n      };\n      if (graphErrors) {\n        throw new _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.ENSJSError({\n          data: owner,\n          errors: graphErrors\n        });\n      }\n      return owner;\n    }\n    if ((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_5__.hexStripZeros)(registryOwner) !== \"0x\") {\n      if (labels.length === 2) {\n        const owner = {\n          registrant: void 0,\n          owner: registryOwner,\n          ownershipLevel: \"registrar\",\n          expired: true\n        };\n        if (graphErrors) {\n          throw new _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.ENSJSError({\n            data: owner,\n            errors: graphErrors\n          });\n        }\n        return owner;\n      }\n      if (registryOwner === nameWrapper.address && nameWrapperOwner && (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_5__.hexStripZeros)(nameWrapperOwner) !== \"0x\") {\n        return {\n          owner: nameWrapperOwner,\n          ownershipLevel: \"nameWrapper\"\n        };\n      }\n      return {\n        owner: registryOwner,\n        ownershipLevel: \"registry\"\n      };\n    }\n    if (graphErrors) {\n      throw new _utils_errors_mjs__WEBPACK_IMPORTED_MODULE_3__.ENSJSError({\n        errors: graphErrors\n      });\n    }\n    return void 0;\n  }\n  if (registryOwner === nameWrapper.address && nameWrapperOwner && (0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_5__.hexStripZeros)(nameWrapperOwner) !== \"0x\") {\n    return {\n      owner: nameWrapperOwner,\n      ownershipLevel: \"nameWrapper\"\n    };\n  }\n  if ((0,_ethersproject_bytes__WEBPACK_IMPORTED_MODULE_5__.hexStripZeros)(registryOwner) !== \"0x\") {\n    return {\n      owner: registryOwner,\n      ownershipLevel: \"registry\"\n    };\n  }\n  return;\n};\nvar getOwner_default = { raw, decode };\n\n\n\n//# sourceURL=webpack://dapp/./node_modules/@ensdomains/ensjs/dist/esm/functions/getOwner.mjs?");

/***/ }),

/***/ "./node_modules/@ensdomains/ensjs/dist/esm/utils/consts.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@ensdomains/ensjs/dist/esm/utils/consts.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EMPTY_ADDRESS: () => (/* binding */ EMPTY_ADDRESS),\n/* harmony export */   MAX_DATE_INT: () => (/* binding */ MAX_DATE_INT),\n/* harmony export */   MAX_INT_64: () => (/* binding */ MAX_INT_64),\n/* harmony export */   MINIMUM_DOT_ETH_CHARS: () => (/* binding */ MINIMUM_DOT_ETH_CHARS)\n/* harmony export */ });\n// src/utils/consts.ts\nvar EMPTY_ADDRESS = \"0x0000000000000000000000000000000000000000\";\nvar MAX_INT_64 = BigInt(\"18446744073709551615\");\nvar MAX_DATE_INT = 864e13;\nvar MINIMUM_DOT_ETH_CHARS = 3;\n\n\n\n//# sourceURL=webpack://dapp/./node_modules/@ensdomains/ensjs/dist/esm/utils/consts.mjs?");

/***/ }),

/***/ "./node_modules/@ensdomains/ensjs/dist/esm/utils/validation.mjs":
/*!**********************************************************************!*\
  !*** ./node_modules/@ensdomains/ensjs/dist/esm/utils/validation.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkIsDotEth: () => (/* binding */ checkIsDotEth),\n/* harmony export */   parseInput: () => (/* binding */ parseInput),\n/* harmony export */   validateName: () => (/* binding */ validateName)\n/* harmony export */ });\n/* harmony import */ var _consts_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./consts.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/consts.mjs\");\n/* harmony import */ var _labels_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./labels.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/labels.mjs\");\n/* harmony import */ var _normalise_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./normalise.mjs */ \"./node_modules/@ensdomains/ensjs/dist/esm/utils/normalise.mjs\");\n// src/utils/validation.ts\n\n\n\nvar validateName = (name) => {\n  const nameArray = name.split(\".\");\n  const normalisedArray = nameArray.map((label) => {\n    if (label.length === 0)\n      throw new Error(\"Name cannot have empty labels\");\n    if (label === \"[root]\") {\n      if (name !== label)\n        throw new Error(\"Root label must be the only label\");\n      return label;\n    }\n    return (0,_labels_mjs__WEBPACK_IMPORTED_MODULE_1__.isEncodedLabelhash)(label) ? (0,_labels_mjs__WEBPACK_IMPORTED_MODULE_1__.checkLabel)(label) || label : (0,_normalise_mjs__WEBPACK_IMPORTED_MODULE_2__.normalise)(label);\n  });\n  const normalisedName = normalisedArray.join(\".\");\n  (0,_labels_mjs__WEBPACK_IMPORTED_MODULE_1__.saveName)(normalisedName);\n  return normalisedName;\n};\nvar parseInput = (input) => {\n  let nameReference = input;\n  let isValid = false;\n  try {\n    nameReference = validateName(input);\n    isValid = true;\n  } catch {\n  }\n  const normalisedName = isValid ? nameReference : void 0;\n  const labels = nameReference.split(\".\");\n  const tld = labels[labels.length - 1];\n  const isETH = tld === \"eth\";\n  const labelDataArray = (0,_normalise_mjs__WEBPACK_IMPORTED_MODULE_2__.split)(nameReference);\n  const isShort = (labelDataArray[0].output?.length || 0) < _consts_mjs__WEBPACK_IMPORTED_MODULE_0__.MINIMUM_DOT_ETH_CHARS;\n  if (labels.length === 1) {\n    return {\n      type: \"label\",\n      normalised: normalisedName,\n      isShort,\n      isValid,\n      is2LD: false,\n      isETH,\n      labelDataArray\n    };\n  }\n  const is2LD = labels.length === 2;\n  return {\n    type: \"name\",\n    normalised: normalisedName,\n    isShort: isETH && is2LD ? isShort : false,\n    isValid,\n    is2LD,\n    isETH,\n    labelDataArray\n  };\n};\nvar checkIsDotEth = (labels) => labels.length === 2 && labels[1] === \"eth\";\n\n\n\n//# sourceURL=webpack://dapp/./node_modules/@ensdomains/ensjs/dist/esm/utils/validation.mjs?");

/***/ })

}]);